(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{7453:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rsvp",function(){return s(7885)}])},4487:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var r=s(5893),n=s(9008),l=s.n(n),a=s(1664),i=s.n(a),c=s(7199),o=s(7294);function d(){let[e,t]=(0,o.useState)(!1);function s(){t(!1)}return(0,r.jsxs)("header",{className:"sticky top-0 z-30 bg-cream/80 backdrop-blur-sm",children:[(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)(i(),{href:"./",className:"text-2xl font-serif text-forest cursor-pointer",children:"A & A"})}),(0,r.jsxs)("nav",{className:"hidden md:flex items-center space-x-6 font-medium text-sm text-near-black",children:[(0,r.jsx)(i(),{href:"./",children:"Hem"}),(0,r.jsx)(i(),{href:"./info",children:"Detaljer"}),(0,r.jsx)(i(),{href:"./rsvp",children:"OSA"}),(0,r.jsx)(i(),{href:"./registry",children:"\xd6nskelista"}),(0,r.jsx)(i(),{href:"./admin/login",children:(0,r.jsx)(c.Z,{variant:"secondary",className:"py-1 px-3 text-sm",children:"Admin"})})]}),(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)("button",{"aria-label":"Open menu",className:"text-near-black",onClick:()=>t(e=>!e),children:"Menu"})})]}),e&&(0,r.jsx)("div",{className:"md:hidden bg-cream border-t",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4 space-y-2",children:[(0,r.jsx)(i(),{href:"./",onClick:s,className:"block",children:"Hem"}),(0,r.jsx)(i(),{href:"./info",onClick:s,className:"block",children:"Detaljer"}),(0,r.jsx)(i(),{href:"./rsvp",onClick:s,className:"block",children:"OSA"}),(0,r.jsx)(i(),{href:"./registry",onClick:s,className:"block",children:"\xd6nskelista"}),(0,r.jsx)(i(),{href:"./admin/login",onClick:s,className:"block",children:(0,r.jsx)(c.Z,{variant:"secondary",className:"py-1 px-3 text-sm",children:"Admin"})})]})})]})}function m(){return(0,r.jsx)(d,{})}function u(){return(0,r.jsx)("footer",{className:"bg-white border-t mt-8",children:(0,r.jsxs)("div",{className:"container mx-auto px-4 py-6 text-center text-sm text-gray-600",children:["\xa9 ",new Date().getFullYear()," Axel & Amanda"]})})}function x(e){let{children:t,title:s="Axel & Amanda"}=e;return(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsxs)(l(),{children:[(0,r.jsx)("title",{children:s}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),(0,r.jsx)("meta",{name:"theme-color",content:"#FAF7F2"})]}),(0,r.jsx)(m,{}),(0,r.jsx)("main",{className:"container mx-auto px-4 py-8 flex-1",children:t}),(0,r.jsx)(u,{})]})}},7199:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(5893);function n(e){let{variant:t="primary",className:s="",children:n,...l}=e;return(0,r.jsx)("button",{className:"".concat("rounded-full px-5 py-2 font-medium transition-all inline-block"," ").concat("primary"===t?"bg-forest text-white hover:bg-forest-600 shadow-sm":"bg-white border border-forest text-forest hover:bg-cream"," ").concat(s),...l,children:n})}s(7294)},8551:function(e,t,s){"use strict";s.d(t,{a:function(){return i}});var r=s(6734),n=s(3454);let l=null;function a(){if(l)return l;let e=n.env.NEXT_PUBLIC_SUPABASE_URL,t=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t)return console.error("Supabase not configured: missing NEXT_PUBLIC_SUPABASE_URL and/or NEXT_PUBLIC_SUPABASE_ANON_KEY"),null;try{l=(0,r.eI)(e,t)}catch(e){return console.error("Failed to create Supabase client",e),null}return l}let i={async listGifts(){let e=a();if(e){let{data:t,error:s}=await e.from("gifts").select("*");if(s)throw s;return t||[]}try{let e=await fetch("./data/gifts.json");if(!e.ok)return console.error("Failed to fetch local gifts.json:",e.status,e.statusText),[];let t=await e.json();return t}catch(e){return console.error("Error fetching local gifts.json",e),[]}},async listRsvps(){let e=a();if(e){let{data:t,error:s}=await e.from("rsvps").select("*").order("createdAt",{ascending:!1});if(s)throw s;return t||[]}let t=localStorage.getItem("demo_rsvps");return t?JSON.parse(t):[]},async saveRsvp(e){let t=a();if(t){let{data:s,error:r}=await t.from("rsvps").insert([{...e}]).select().single();if(r)throw r;return s}let s=await this.listRsvps(),r={...e,id:"r_"+Date.now(),createdAt:new Date().toISOString()};return s.unshift(r),localStorage.setItem("demo_rsvps",JSON.stringify(s)),r},async reserveGift(e,t){let s=a();if(s){let{data:r,error:n}=await s.from("gifts").update({reserved:!0,reservedBy:t}).eq("id",e).select().single();if(n)throw n;return r}let r=await this.listGifts(),n=r.find(t=>t.id===e);if(!n)throw Error("Not found");return n.reserved=!0,n.reservedBy=t||null,localStorage.setItem("demo_gifts",JSON.stringify(r)),n},async unreserveGift(e){let t=a();if(t){let{data:s,error:r}=await t.from("gifts").update({reserved:!1,reservedBy:null}).eq("id",e).select().single();if(r)throw r;return s}let s=await this.listGifts(),r=s.find(t=>t.id===e);if(!r)throw Error("Not found");return r.reserved=!1,r.reservedBy=null,localStorage.setItem("demo_gifts",JSON.stringify(s)),r}}},7885:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var r=s(5893),n=s(4487),l=s(7536),a=s(1604),i=s(6312),c=s(8551),o=s(7294);let d=a.z.object({name:a.z.string().min(1,"Obligatoriskt"),email:a.z.string().email("Ogiltig e-postadress"),attending:a.z.string(),guestCount:a.z.number().min(0).max(10).optional(),mealPreference:a.z.string().optional(),notes:a.z.string().optional()});function m(){let[e,t]=(0,o.useState)(!1),[s,a]=(0,o.useState)(!1),[m,u]=(0,o.useState)(null),{register:x,handleSubmit:f,formState:{errors:h}}=(0,l.cI)({resolver:(0,i.F)(d),defaultValues:{attending:"yes",guestCount:1}});async function j(e){var s,r,n;let l={name:e.name,email:e.email,attending:"yes"===e.attending,guestCount:null!==(s=e.guestCount)&&void 0!==s?s:1,mealPreference:null!==(r=e.mealPreference)&&void 0!==r?r:null,notes:null!==(n=e.notes)&&void 0!==n?n:null};a(!0),u(null);try{await c.a.saveRsvp(l),t(!0)}catch(e){console.error("Failed to save RSVP",e),u("Misslyckades att skicka OSA. F\xf6rs\xf6k igen.")}finally{a(!1)}}return e?(0,r.jsx)(n.Z,{title:"OSA — Skickad",children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:"Tack!"}),(0,r.jsx)("p",{className:"mt-2",children:"Din OSA \xe4r registrerad. Vi ser fram emot att tr\xe4ffa dig."})]})}):(0,r.jsxs)(n.Z,{title:"RSVP",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"RSVP"}),(0,r.jsxs)("form",{onSubmit:f(j),className:"mt-6 max-w-lg space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Fullst\xe4ndigt namn"}),(0,r.jsx)("input",{className:"mt-1 block w-full border rounded p-2",...x("name")}),h.name&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:h.name.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"E-post"}),(0,r.jsx)("input",{className:"mt-1 block w-full border rounded p-2",...x("email")}),h.email&&(0,r.jsx)("p",{className:"text-red-600 text-sm",children:h.email.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"N\xe4rvaro"}),(0,r.jsxs)("select",{...x("attending"),className:"mt-1 block w-full border rounded p-2",children:[(0,r.jsx)("option",{value:"yes",children:"Ja"}),(0,r.jsx)("option",{value:"no",children:"Nej"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Antal g\xe4ster"}),(0,r.jsx)("input",{type:"number",className:"mt-1 block w-full border rounded p-2",...x("guestCount",{valueAsNumber:!0})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"M\xe5ltidsval"}),(0,r.jsxs)("select",{...x("mealPreference"),className:"mt-1 block w-full border rounded p-2",children:[(0,r.jsx)("option",{value:"yes",children:"Ja"}),(0,r.jsx)("option",{value:"no",children:"Nej"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Meddelande (valfritt)"}),(0,r.jsx)("textarea",{className:"mt-1 block w-full border rounded p-2",...x("notes")})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:s,className:"bg-forest text-white px-4 py-2 rounded disabled:opacity-60",children:s?"Skickar…":"Skicka OSA"})}),m&&(0,r.jsx)("p",{className:"text-red-600 mt-2",children:m})]})]})}}},function(e){e.O(0,[996,734,760,774,888,179],function(){return e(e.s=7453)}),_N_E=e.O()}]);