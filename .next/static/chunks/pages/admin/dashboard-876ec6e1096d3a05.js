(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{2599:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/dashboard",function(){return r(6657)}])},4487:function(e,t,r){"use strict";r.d(t,{Z:function(){return f}});var s=r(5893),n=r(9008),i=r.n(n),a=r(1664),l=r.n(a),c=r(7199);function o(){return(0,s.jsx)("header",{className:"sticky top-0 z-30 bg-cream/80 backdrop-blur-sm",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsx)("div",{className:"text-2xl font-serif text-forest",children:"A & A"})}),(0,s.jsxs)("nav",{className:"hidden md:flex items-center space-x-6 font-medium text-sm text-near-black",children:[(0,s.jsx)(l(),{href:"/",children:"Hem"}),(0,s.jsx)(l(),{href:"/info",children:"Detaljer"}),(0,s.jsx)(l(),{href:"/rsvp",children:"OSA"}),(0,s.jsx)(l(),{href:"/registry",children:"\xd6nskelista"}),(0,s.jsx)(l(),{href:"/admin/login",children:(0,s.jsx)(c.Z,{variant:"secondary",className:"py-1 px-3 text-sm",children:"Admin"})})]}),(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsx)("button",{"aria-label":"Open menu",className:"text-near-black",children:"Menu"})})]})})}function d(){return(0,s.jsx)(o,{})}function m(){return(0,s.jsx)("footer",{className:"bg-white border-t mt-8",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-6 text-center text-sm text-gray-600",children:["\xa9 ",new Date().getFullYear()," Axel & Amanda — Byggd f\xf6r GitHub Pages"]})})}function f(e){let{children:t,title:r="Axel & Amanda"}=e;return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:r}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,s.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:""}),(0,s.jsx)("meta",{name:"theme-color",content:"#FAF7F2"})]}),(0,s.jsx)(d,{}),(0,s.jsx)("main",{className:"container mx-auto px-4 py-8 flex-1",children:t}),(0,s.jsx)(m,{})]})}r(7294)},7199:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(5893);function n(e){let{variant:t="primary",className:r="",children:n,...i}=e;return(0,s.jsx)("button",{className:"".concat("rounded-full px-5 py-2 font-medium transition-all inline-block"," ").concat("primary"===t?"bg-forest text-white hover:bg-forest-600 shadow-sm":"bg-white border border-forest text-forest hover:bg-cream"," ").concat(r),...i,children:n})}r(7294)},8551:function(e,t,r){"use strict";r.d(t,{a:function(){return l}});var s=r(6734),n=r(3454);let i=null;function a(){if(i)return i;let e=n.env.NEXT_PUBLIC_SUPABASE_URL,t=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t)return console.error("Supabase not configured: missing NEXT_PUBLIC_SUPABASE_URL and/or NEXT_PUBLIC_SUPABASE_ANON_KEY"),null;try{i=(0,s.eI)(e,t)}catch(e){return console.error("Failed to create Supabase client",e),null}return i}let l={async listGifts(){let e=a();if(e){let{data:t,error:r}=await e.from("gifts").select("*");if(r)throw r;return t||[]}try{let e=await fetch("./data/gifts.json");if(!e.ok)return console.error("Failed to fetch local gifts.json:",e.status,e.statusText),[];let t=await e.json();return t}catch(e){return console.error("Error fetching local gifts.json",e),[]}},async listRsvps(){let e=a();if(e){let{data:t,error:r}=await e.from("rsvps").select("*").order("createdAt",{ascending:!1});if(r)throw r;return t||[]}let t=localStorage.getItem("demo_rsvps");return t?JSON.parse(t):[]},async saveRsvp(e){let t=a();if(t){let{data:r,error:s}=await t.from("rsvps").insert([{...e}]).select().single();if(s)throw s;return r}let r=await this.listRsvps(),s={...e,id:"r_"+Date.now(),createdAt:new Date().toISOString()};return r.unshift(s),localStorage.setItem("demo_rsvps",JSON.stringify(r)),s},async reserveGift(e,t){let r=a();if(r){let{data:s,error:n}=await r.from("gifts").update({reserved:!0,reservedBy:t}).eq("id",e).select().single();if(n)throw n;return s}let s=await this.listGifts(),n=s.find(t=>t.id===e);if(!n)throw Error("Not found");return n.reserved=!0,n.reservedBy=t||null,localStorage.setItem("demo_gifts",JSON.stringify(s)),n},async unreserveGift(e){let t=a();if(t){let{data:r,error:s}=await t.from("gifts").update({reserved:!1,reservedBy:null}).eq("id",e).select().single();if(s)throw s;return r}let r=await this.listGifts(),s=r.find(t=>t.id===e);if(!s)throw Error("Not found");return s.reserved=!1,s.reservedBy=null,localStorage.setItem("demo_gifts",JSON.stringify(r)),s}}},6657:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(5893),n=r(4487),i=r(7294),a=r(8551);function l(){let[e,t]=(0,i.useState)([]),[r,l]=(0,i.useState)([]),[c,o]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e=localStorage.getItem("admin_auth");if(!e){window.location.href="/admin/login";return}(async function(){try{let e=await a.a.listRsvps(),r=await a.a.listGifts(),s=localStorage.getItem("demo_gifts");if(s)try{l(JSON.parse(s))}catch(e){l(r)}else l(r);t(e)}catch(e){console.error("Failed to load admin data:",e),t([]),l([])}finally{o(!1)}})()},[]),(0,s.jsxs)(n.Z,{title:"Adminpanel",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold",children:"Adminpanel"}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:function(){localStorage.removeItem("admin_auth"),window.location.href="/"},className:"border px-3 py-1 rounded",children:"Logga ut"})})]}),c?(0,s.jsx)("p",{className:"mt-4",children:"Laddar…"}):(0,s.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white border rounded p-4",children:[(0,s.jsxs)("h2",{className:"font-semibold",children:["OSAs (",e.length,")"]}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("button",{onClick:function(){let t=e.map(e=>[e.id,e.name,e.email,String(e.attending),String(e.guestCount),e.mealPreference||"",e.notes||"",e.createdAt]),r=["id,name,email,attending,guestCount,mealPreference,notes,createdAt",...t.map(e=>e.map(e=>'"'+String(e).replace(/"/g,'""')+'"').join(","))].join("\n");!function(e,t){let r=new Blob([t],{type:"text/csv;charset=utf-8;"}),s=URL.createObjectURL(r),n=document.createElement("a");n.href=s,n.download=e,n.click(),URL.revokeObjectURL(s)}("rsvps.csv",r)},className:"bg-forest text-white px-3 py-1 rounded",children:"Exportera CSV"})}),(0,s.jsx)("ul",{className:"mt-4 space-y-2",children:e.map(e=>(0,s.jsxs)("li",{className:"border rounded p-2",children:[(0,s.jsxs)("div",{className:"font-semibold",children:[e.name," — ",e.attending?"Kommer":"Kommer inte"]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:[e.email," • G\xe4ster: ",e.guestCount]})]},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white border rounded p-4",children:[(0,s.jsx)("h2",{className:"font-semibold",children:"G\xe5vor"}),(0,s.jsx)("ul",{className:"mt-3 space-y-2",children:r.map(e=>(0,s.jsx)("li",{className:"border rounded p-2 flex justify-between items-center",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e.description}),(0,s.jsxs)("div",{className:"text-sm",children:["Status: ",e.reserved?"Reserverad":"Tillg\xe4nglig"]})]})},e.id))})]})]})]})}}},function(e){e.O(0,[996,734,774,888,179],function(){return e(e.s=2599)}),_N_E=e.O()}]);